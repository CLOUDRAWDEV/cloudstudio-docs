---
title: クレデンシャル生成及び登録
sidebar_position: 2
tags:
    [
        クレデンシャル生成,
        クレデンシャル登録,
        Azure クレデンシャル,
        Azure,
        NCloud,
        AWS,
        key,
    ]
---

import styles from "/src/scss/_markdown.module.scss"
import registration01 from "./img/registration-01.png"
import registration02 from "@site/docs/credential/img/registration-02.png"
import registration03 from "@site/docs/credential/img/registration-03.png"
import registration04 from "@site/docs/credential/img/registration-04.png"
import registration05 from "@site/docs/credential/img/registration-05.png"
import registration06 from "./img/registration-06.png"
import registration07 from "@site/docs/credential/img/registration-07.png"
import registration08 from "@site/docs/credential/img/registration-08.png"
import registration09 from "@site/docs/credential/img/registration-09.png"
import registration10 from "@site/docs/credential/img/registration-10.png"
import aws1 from "@site/docs/credential/img/aws1.png"
import aws2 from "@site/docs/credential/img/aws2.png"
import aws3 from "@site/docs/credential/img/aws3.png"
import aws4 from "@site/docs/credential/img/aws4.png"

<hr />
<br />

## クレデンシャル生成及び登録する {#create-credential}

CloudStudio にクレデンシャルを登録するためには、各 CSP ページでクレデンシャルを作成する必要があります。
クレデンシャル登録은 `メインページ`または `キャンバスページ`で行うことができます。
クレデンシャルを事前に登録しておく理由は、その後キャンバスを配布する時と既存のインフラをインポートする時にクレデンシャル情報が必要だからです。

<br />

<details>
    <summary>クレデンシャルとは？</summary>
    <h5>ユーザーログイン情報など個人情報を暗号化した情報です。</h5>
</details>

<p>&nbsp;</p>

### Azure クレデンシャル登録

それぞれのフィールドの横にある 🔗  リンクアイコンをクリックすると、`azure docs`につながります。
参考にしてフィールドを埋めます。

<div className={styles.imgWrap}>
    <img src={registration01} alt="이미지" />
</div>

<br />

1. `マイページ - クレデンシャル管理`で `クレデンシャル登録` ボタンをクリックします。
2. Azure を選択します。
3. クレデンシャル名を入力します。

> -   英語で始めなければなりません。
> -   数字/アンダーバー/ハイフン以外の特殊記号の使用は不可です。
> -   4 ~ 20 桁で入力します。

4. `Azure Portal`に接続してからログインします。 https://azure.microsoft.com/ko-kr/get-started/azure-portal/
5. `Azure Active Directory`をクリックします。

<div className={styles.imgWrap}>
    <img src={registration02} alt="이미지" />
</div>

<br />

6. `アプリ登録>新しい登録`をクリックします。
7. アプリケーション登録ページが表示されたら、アプリケーションの「登録情報」を入力します。

> -   アプリケーションに対する名前を入力します（例:AspNetCore-WebApp）。 この名前は、アプリのユーザーに表示される場合があり、後で変更する場合があります。
> -   アプリケーションにサポートされているアカウント タイプを選択します。
> -   リダイレクト URI の場合、認証に成功した後に返還されたトークン応答を受けるアプリケーションの形式および URI 対象を追加します。 たとえば、次のように入力します。 https://localhost:44321
> -   登録を選択します。

8. 管理で「認証」を選択し、次の情報を追加します。

> -   ウェブセクションで https://localhost:44321/signin-oidc をリダイレクト URI として追加します。
> -   前面チャンネルログアウト URL に https://localhost:44321/signout-oidc を入力します。
> -   暗示的権限付与とハイブリッドの流れから ID トークンを選択します。
> -   保存を選択します。

9. アプリを登録した所有者は、他のユーザーが登録されたアプリにアクセスできるようにアクセス権限を割り当てる必要があります。 役割割り当てのためにさっき作成したアプリをクリックします。

> -   9-1. アクセス制御（IAM）をクリックします。 次に、リソース グループへのアクセス制御（IAM）ページの例を示します。
> -   9-2. ロール割り当てタブをクリックして、関連範囲のロール割り当てを確認します。
> -   9-3. 追加 > 役割割り当ての追加をクリックします。
> -   9-4. ロールタブで使用するロールを選択します。
> -   9-5. 詳細情報列で、[表示] をクリックして、役割に関する詳細情報を確認します。
> -   9-6. 次をクリックします。
> -   9-7. メンバータブでユーザ、グループまたはサービス主体を選択して選択した役割を、1 つ以上の Azure AD ユーザー、グループ、またはサービス主体（アプリケーション）に割り当てます。
> -   9-8. メンバーの選択をクリックします。
> -   9-9. ユーザー、グループ、またはサービス主体を見つけて選択します。
> -   9-10. 選択をクリックして、メンバー リストにユーザー、グループ、またはサービス主体を追加します。
> -   9-11. 選択した役割を 1 つ以上の管理 ID に割り当てるには、管理 ID を選択します。
> -   9-12. メンバーの選択をクリックします。
> -   9-13. 管理 ID 選択ウィンドウで、形式がユーザが割り当てた管理 ID またはシステムが割り当てた管理 ID であるかを選択します。
> -   9-14. 管理 ID を探して選択します。
> -   9-15. 選択をクリックしてメンバーリストに管理 ID を追加し、[次へ]をクリックします。
> -   9-16. レビュー + 割り当てをクリックして、役割を割り当てます。 数分で、選択した範囲でセキュリティ エンティティに役割が割り当てられます。
> -   9-17. 役割割り当ての説明が表示されない場合は、列の編集をクリックして説明列を追加します。

<p>&nbsp;</p>

:::info
Azure Portal を使用して Azure の役割を割り当てる方法の詳細については、以下のリンクを参照してください。
https://learn.microsoft.com/ko-kr/azure/role-based-access-control/role-assignments-portal
:::

<p>&nbsp;</p>

10. `ディレクトリ(テナント)ID`を CloudStudio `Tenant ID`に入力します。 `アプリケーション（クライアント）ID`を CloudStudio `Service Principal ID`に入力します。

<div className={styles.imgWrap}>
    <img src={registration03} alt="이미지" />
</div>

<br />
11. 左サイドバーで `認証書とパスワード`をクリックします。 12. `新しいクライアント暗号`を
クリックします。 13. Keyに対する簡単な説明を入力した後、満了時間を選択します。 入力が完了したら、
`追加`をクリックします。 14. 生成された値をコピーしてCloudStudio　Service Principal
Keyに貼り付けます。

<p>&nbsp;</p>

:::caution

作成された Service Principal Key は、ページを「更新すると表示されません」。 すぐに書き留めておくことをお勧めします。 Key 値が思い出せない場合は、再度生成することができますが、推奨事項ではありません。

:::

<br />

15. Azure Potal `ホーム`に戻り、 `購読`をクリックします。

<div className={styles.imgWrap}>
    <img src={registration04} alt="이미지" />
</div>

<br />

16. `購読ID`を CloudStudio `Subscription ID`に入力します。

<div className={styles.imgWrap}>
    <img src={registration05} alt="이미지" />
</div>

<br />

17. `登録`をクリックします。

:::tip

Azure CLI で資格証明を登録する方法は、 `下記リンク`をご参照お願いします。
https://docs.microsoft.com/ko-kr/cli/azure/what-is-azure-cli

:::

<p>&nbsp;</p>

### NCloud クレデンシャル登録する

CloudStudio を使用して NAVER Cloud Platform に配布するためには、NAVER Cloud Platform の API 認証キーである `Access key`と `Secret Key`が必要です。
API 認証キーは、API を呼び出したユーザーが権限を持つユーザーであるかどうかを識別するツールです。

<div className={styles.imgWrap}>
    <img src={registration06} alt="이미지" />
</div>

<br />

1. `クレデンシャル名`を入力します。
2. 認証キー生成のために [NAVER Cloud Platform ポータル](https://www.ncloud.com/)で会員登録を行います。

:::tip

NAVER Cloud Platform の会員登録方法は、 [こちら](https://guide.ncloud-docs.com/docs/userguide-userguideaccount-2)をご覧いただきます。

:::

<br />

3. [NCP サイト](https://www.ncloud.com/product/applicationService/sens)で `利用申し込み`をクリックします。
   但し、`決済手段`を必須登録しなければ認証キーの発行を受けることができません。

<div className={styles.imgWrap}>
    <img src={registration08} alt="이미지" />
</div>

<br />

4. `ポータル > マイページ > アカウント管理 > 認証キー管理` ページにアクセスします。
5. 認証キーがない場合は、 `新規API認証キーの生成` ボタンをクリックします。

<div className={styles.imgWrap}>
    <img src={registration09} alt="이미지" />
</div>

<br />

6. `Access Key ID`をコピーしてクラウドスタジオに貼り付けます。
7. `Secret Key`を作成し、クラウドスタジオに貼り付けます。

<div className={styles.imgWrap}>
    <img src={registration10} alt="이미지" />
</div>

<br />

:::tip

すべての権限を持つメインアカウントではなく、サブアカウントで API 認証キーを発行し、認証キーの流出に備えて定期的に交換することをお勧めします。
API 認証キーを使用しなかったり、盗用が疑われる場合でも、セキュリティのために発行した `認証キーを中止または削除`することをお勧めします。
API 認証キーを新たに作成した後も、使用中だったサービスを正常に利用するためには、 `変更されたAPI認証キーを適用`する必要があります。

:::

<p>&nbsp;</p>

### AWS クレデンシャル登録する

1. https://console.aws.amazon.com/iam/ で `IAM`にログインしてコンソールを開きます。

<div className={styles.imgWrap}>
    <img src={aws1} alt="이미지" />
</div>

<br />

2. コンソールホームで右上の `マイアカウント`をクリックし、 `セキュリティ資格証明`を選択します。

<div className={styles.imgWrap}>
    <img src={aws2} alt="이미지" />
</div>

<br />

3. `アクセスキー`をクリックします。
4. `新しいアクセス キーを作成`をクリックします。

<div className={styles.imgWrap}>
    <img src={aws3} alt="이미지" />
</div>

5. `アクセスキー表示`をクリックするか、エクセルファイルをダウンロードしてキーを確認します。

<div className={styles.imgWrap}>
    <img src={aws4} alt="이미지" />
</div>

<br />

:::caution

新しいアクセスキー ID とセキュリティアクセスキーが含まれたキーファイルを最初にキーを生成する時にダウンロードしないと、セキュリティアクセスキーを再読み込むことができません。

:::

<br />

### 参考

-   [Azure クレデンシャル生成](https://docs.microsoft.com/en-us/azure/automation/shared-resources/credentials?tabs=azure-powershell#create-a-new-credential-asset)
-   [AWS クレデンシャル生成](https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/id_credentials_access-keys.html#Using_CreateAccessKey)
-   [NCloud クレデンシャル生成](https://api.ncloud-docs.com/docs/common-ncpapi)
