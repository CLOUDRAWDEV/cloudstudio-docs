---
title: KeyVault
sidebar_position: 0
tags: [Azure, リソース, KeyVault, KeyVault]
---

<hr />
<br />

## リソースアイコン

<img
    src={
        "https://cloudstudioblob.blob.core.windows.net/cloudstudio/azureImg/key_vault-key_vault.png"
    }
/>

## リソース概要

Azure Key Vault は秘密を安全に保存してアクセスするためのクラウドサービスです。
秘密は API 鍵、暗号、証明書または暗号化鍵などのアクセスを厳しく制御しようとする項目です。 Key Vault サービスは、クレデンシャルコレクションおよび管理される HSM(ハードウェアセキュリティモジュール)プールという 2 つのタイプのコンテナをサポートします。
クレデンシャルコレクションは、ソフトウェアと HSM のサポート キー、パスワード、および認証書の保存をサポートします。 管理型 HSM プールは HSM 対応キーのみ対応します。

## 関連リソース

### 上位リソース

-   [**Resource Group**](https://docs.cstudio.app/ja/docs/resource/azure/Base/ResourceGroup)

## リソース設定値

-   `sku_name` : Key Vault の規模及び機能選択のための価格設定階層(SKU) - `standard`, `premium`

-   `enabled_for_disk_encryption` : Azure Disk Encryption が Vault 及びラッピング解除キーで secrets を検索できるように許容 - `true`, `false`

-   `soft_delete_retention_days` : 削除された項目の保存日数、7~90 の範囲 - `7` ~ `90`

-   `purge_protection_enabled` : データ損失を防止するための消去保護を有効にする - `true`, `false`

-   `network_acl_bypass` : 信頼できるサービスが firewall をバイパスできるように許容 - `AzureServices`, `None`

-   `network_acl_action` : 設定した IP Rules と一致するルールがない場合の動作 - `Deny`, `Allow`

-   `network_acl_ip_rules` : Key Vault にアクセスするための IP アドレスおよび CIDR

-   `access_policies`

    -   `object_id` : ユーザーのオブジェクト ID を通じて Vault を使用する主体を選択
    -   `key_permissions` : Key 権限リスト
    -   `secret_permissions` : Secret 権限リスト
    -   `certificate_permissions` : Key certificate のリスト

-   `key_vault_secret`

    -   `name` : Key Vault Secret 名
    -   `expiration_date` : Secret 満了 UTC 日付時間

-   `key_vault_key`

    -   `type` : Key Vault Key を使用するための Key タイプ - `EC`, `EC-HSM`, `RSA`, `RSA-HSM`
    -   `size` : キータイプが RSA の場合、バイト単位のキーサイズ指定 - `2048`, `3072`, `4096`
    -   `curve` : キータイプが EC の場合は、Curve を指定 - `P-256`, `P-256K`, `P-384`, `P-521`
    -   `expiration_date` : Key 満了 UTC 日付時間
    -   `opts` : 許容する JSON web key operation リスト

-   `key_vault_certificate`

    -   `import_existing_certificate` : 現在認証書追加の可否 - `true`, `false`
    -   `contents` : Base64 ベースの認証書の内容
    -   `password` : 証明書のパスワード
    -   `issuer_name` : 証明書発行者名 - `Self`, `Unknown`
    -   `exportable` : Key の外部保存の活性化 - `true`, `false`
    -   `key_type` : Key タイプ - `RSA`, `EC`
    -   `key_size` : Key サイズ指定、Key タイプが RSA の場合 - `2048/3072/4096`, Key タイプが EC の場合 - `256/384/521`
    -   `curve` : キータイプが EC の場合は、Curve を指定 - `P-256`,`P-256K`,`P-384`,`P-521`
    -   `reuse_key` : Key の外部保存の活性化 - `true`, `false`
    -   `content_type` : 認証書のコンテンツタイプ - `application/x-pkcs12`, `application/x-pem-file`
    -   `key_usage` : Key 使用フラグリスト
    -   `subject` : X.500 の固有名
    -   `validity_in_months` : 認証書の月単位の有効期限 - `7` ~ `90`

-   `tag` : リソースをカテゴリに分類するためのタグ - 最大 512 文字, `key`:`value`

---

## 参考資料

-   [Azure KeyVault(Microsoft)](https://learn.microsoft.com/ko-kr/azure/key-vault/general/overview)
-   [Azure KeyVault 価格](https://azure.microsoft.com/en-us/pricing/details/key-vault/)
-   [Azure KeyVault(Terraform)](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/key_vault)
